# ğŸğŸ¥¬ æœè”¬å®¢æœAIç³»ç»Ÿ

ä¸€ä¸ªä¸“ä¸ºæœè”¬æ‹¼å°ç¤¾åŒºè®¾è®¡çš„æ™ºèƒ½å®¢æœAIåŠ©æ‰‹ï¼Œèƒ½å¤Ÿå‡†ç¡®å›ç­”å®¢æˆ·å…³äºäº§å“å’Œå¹³å°æ”¿ç­–çš„é—®é¢˜ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- **æ™ºèƒ½äº§å“å’¨è¯¢**: æŸ¥è¯¢ä»·æ ¼ã€äº§åœ°ã€è¥å…»ä»·å€¼ã€ä¿å­˜æ–¹æ³•ç­‰
- **æ”¿ç­–è§£ç­”**: é…é€ã€ä»˜æ¬¾ã€å–è´§ã€å”®åç­‰å¹³å°æ”¿ç­–
- **å‹å¥½äº¤äº’**: ä¸­æ–‡å¯¹è¯ï¼Œä¸“ä¸šå®¢æœä½“éªŒ
- **å®æ—¶æ£€ç´¢**: åŸºäºæœ¬åœ°æ•°æ®çš„å¿«é€Ÿå‡†ç¡®æ£€ç´¢
- **å“åº”å¼ç•Œé¢**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·ç•Œé¢å±‚ (WebèŠå¤©ç•Œé¢)
    â†“
AIå¯¹è¯å±‚ (LLM APIè°ƒç”¨ + æç¤ºè¯å·¥ç¨‹)
    â†“
çŸ¥è¯†æ£€ç´¢å±‚ (äº§å“/æ”¿ç­–æ™ºèƒ½åŒ¹é…)
    â†“
æ•°æ®å¤„ç†å±‚ (CSV/JSONè§£æ + å…³é”®è¯ç´¢å¼•)
```

## ğŸ“‹ æŠ€æœ¯æ ˆ

- **åç«¯**: Python Flask
- **å‰ç«¯**: HTML + CSS + JavaScript
- **æ•°æ®å¤„ç†**: pandas + jieba (ä¸­æ–‡åˆ†è¯)
- **AIæ¨¡å‹**: DeepSeek-V3-0324
- **æœç´¢ç®—æ³•**: æ¨¡ç³ŠåŒ¹é… + å…³é”®è¯ç´¢å¼•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

#### 1. ç¯å¢ƒè¦æ±‚

- Python 3.7+
- ç½‘ç»œè¿æ¥ (è°ƒç”¨LLM API)

#### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

#### 3. ç¯å¢ƒå˜é‡é…ç½®

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„APIå¯†é’¥ï¼š
```
LLM_API_KEY=your_deepseek_api_key_here
SECRET_KEY=your_random_secret_key
```

#### 4. æ•°æ®å‡†å¤‡

ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š
- `data/products.csv` - äº§å“æ•°æ®
- `data/policy.json` - æ”¿ç­–æ•°æ®

#### 5. å¯åŠ¨ç³»ç»Ÿ

```bash
python start.py
```

æˆ–è€…ç›´æ¥è¿è¡Œï¼š

```bash
python app.py
```

#### 6. è®¿é—®ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:5000

### äº‘ç«¯éƒ¨ç½² (Render)

#### å¿«é€Ÿéƒ¨ç½²åˆ°Renderäº‘å¹³å°

1. **Forkæˆ–å…‹éš†æ­¤ä»“åº“**åˆ°æ‚¨çš„GitHubè´¦æˆ·

2. **ç™»å½•Renderæ§åˆ¶å°**: https://render.com

3. **åˆ›å»ºWeb Service**:
   - ç‚¹å‡» "New +" â†’ "Web Service"
   - è¿æ¥æ‚¨çš„GitHubä»“åº“
   - é€‰æ‹©æ­¤é¡¹ç›®

4. **é…ç½®æœåŠ¡**:
   - **Name**: `chat-ai-2-0`
   - **Environment**: `Python`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `python app.py`

5. **è®¾ç½®ç¯å¢ƒå˜é‡**:
   ```
   LLM_API_KEY=æ‚¨çš„DeepSeek APIå¯†é’¥
   SECRET_KEY=éšæœºç”Ÿæˆçš„å¯†é’¥å­—ç¬¦ä¸²
   FLASK_ENV=production
   ```

6. **éƒ¨ç½²**: ç‚¹å‡» "Create Web Service"ï¼Œç­‰å¾…éƒ¨ç½²å®Œæˆ

7. **è®¿é—®**: éƒ¨ç½²æˆåŠŸåè·å¾— `.onrender.com` åŸŸå

ğŸ“– **è¯¦ç»†éƒ¨ç½²æŒ‡å—**: æŸ¥çœ‹ [RENDER_DEPLOYMENT.md](RENDER_DEPLOYMENT.md)

## ğŸ“ é¡¹ç›®ç»“æ„

```
Chat AI 2.0/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models/                   # æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ knowledge_retriever.py    # çŸ¥è¯†æ£€ç´¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ data_processor.py         # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”‚   â””â”€â”€ llm_client.py            # LLMå®¢æˆ·ç«¯
â”‚   â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ generate_secret_key.py   # å¯†é’¥ç”Ÿæˆå·¥å…·
â”œâ”€â”€ tests/                        # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_api.py              # APIæµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ test_system.py           # ç³»ç»Ÿæµ‹è¯•è„šæœ¬
â”œâ”€â”€ data/                         # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ products.csv             # äº§å“æ•°æ®
â”‚   â””â”€â”€ policy.json              # æ”¿ç­–æ•°æ®
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md       # é¡¹ç›®æ€»ç»“
â”‚   â”œâ”€â”€ DEPLOYMENT_CHECKLIST.md  # éƒ¨ç½²æ£€æŸ¥æ¸…å•
â”‚   â”œâ”€â”€ GITHUB_SETUP.md          # GitHubè®¾ç½®æŒ‡å—
â”‚   â”œâ”€â”€ RENDER_DEPLOYMENT.md     # Renderéƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ render_env_setup_guide.md # ç¯å¢ƒè®¾ç½®æŒ‡å—
â”‚   â”œâ”€â”€ secret_key_lifecycle_guide.md # å¯†é’¥ç®¡ç†æŒ‡å—
â”‚   â””â”€â”€ security_best_practices.md # å®‰å…¨æœ€ä½³å®è·µ
â”œâ”€â”€ scripts/                      # è„šæœ¬æ–‡ä»¶
â”‚   â””â”€â”€ upload_to_github.bat     # GitHubä¸Šä¼ è„šæœ¬
â”œâ”€â”€ templates/                    # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ index.html               # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ 404.html                 # 404é”™è¯¯é¡µ
â”‚   â””â”€â”€ 500.html                 # 500é”™è¯¯é¡µ
â”œâ”€â”€ static/                       # é™æ€èµ„æº
â”œâ”€â”€ app.py                        # Flaskä¸»åº”ç”¨
â”œâ”€â”€ start.py                      # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ requirements.txt              # Pythonä¾èµ–
â”œâ”€â”€ render.yaml                   # éƒ¨ç½²é…ç½®
â”œâ”€â”€ .env.example                  # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md                     # é¡¹ç›®æ–‡æ¡£
```

## ğŸ§ª æµ‹è¯•ç³»ç»Ÿ

### è¿è¡Œå®Œæ•´æµ‹è¯•

```bash
python tests/test_system.py
```

### è¿è¡Œç‰¹å®šæµ‹è¯•

```bash
python tests/test_system.py data      # æ•°æ®åŠ è½½æµ‹è¯•
python tests/test_system.py product   # äº§å“æœç´¢æµ‹è¯•
python tests/test_system.py policy    # æ”¿ç­–æœç´¢æµ‹è¯•
python tests/test_system.py ai        # AIå›ç­”æµ‹è¯•
python tests/test_system.py performance # æ€§èƒ½æµ‹è¯•
```

### APIæµ‹è¯•

```bash
python tests/test_api.py              # æµ‹è¯•æ‰€æœ‰APIç«¯ç‚¹
```

## ğŸ“Š æ•°æ®æ ¼å¼

### äº§å“æ•°æ® (products.csv)

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| ProductName | äº§å“åç§° | çˆ±å¦ƒè‹¹æœ |
| Specification | è§„æ ¼ | å¤§ç®± |
| Price | ä»·æ ¼ | 60 |
| Unit | å•ä½ | å¤§ç®± |
| Category | ç±»åˆ« | æ—¶ä»¤æ°´æœ |
| Keywords | å…³é”®è¯ | è‹¹æœ |
| Taste | å£æ„Ÿ | è„†ç”œå¤šæ± |
| Origin | äº§åœ° | è¿›å£ |
| Benefits | ç‰¹ç‚¹ | é«˜å“è´¨è‹¹æœ |
| SuitableFor | é€‚åˆäººç¾¤ | è‹¹æœçˆ±å¥½è€… |

### æ”¿ç­–æ•°æ® (policy.json)

```json
{
  "version": "2.0.0",
  "sections": {
    "delivery": ["é…é€ç›¸å…³æ”¿ç­–æ¡æ¬¾"],
    "payment": ["ä»˜æ¬¾ç›¸å…³æ”¿ç­–æ¡æ¬¾"],
    "pickup": ["å–è´§ç›¸å…³æ”¿ç­–æ¡æ¬¾"],
    ...
  }
}
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

ç³»ç»Ÿæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼Œä¸»è¦å˜é‡åŒ…æ‹¬ï¼š

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…éœ€ |
|--------|------|--------|------|
| `LLM_API_KEY` | DeepSeek APIå¯†é’¥ | - | âœ… |
| `LLM_API_URL` | APIç«¯ç‚¹åœ°å€ | https://llm.chutes.ai/v1/chat/completions | âŒ |
| `LLM_MODEL` | æ¨¡å‹åç§° | deepseek-ai/DeepSeek-V3-0324 | âŒ |
| `SECRET_KEY` | Flaskä¼šè¯å¯†é’¥ | é»˜è®¤å¯†é’¥ | âœ… |
| `FLASK_ENV` | Flaskç¯å¢ƒ | development | âŒ |
| `PORT` | æœåŠ¡ç«¯å£ | 5000 | âŒ |

### æœ¬åœ°å¼€å‘é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
LLM_API_KEY=your_deepseek_api_key
SECRET_KEY=your_random_secret_key
FLASK_ENV=development
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

åœ¨Renderç­‰äº‘å¹³å°ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
LLM_API_KEY=your_deepseek_api_key
SECRET_KEY=your_random_secret_key
FLASK_ENV=production
```

### ç³»ç»Ÿæç¤ºè¯

å¯åœ¨ `llm_client.py` ä¸­çš„ `system_prompt` å˜é‡ä¸­è‡ªå®šä¹‰AIåŠ©æ‰‹çš„è¡Œä¸ºå’Œå›ç­”é£æ ¼ã€‚

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **ç¼“å­˜æœºåˆ¶**: å¯¹å¸¸è§é—®é¢˜å®ç°ç¼“å­˜
- **ç´¢å¼•ä¼˜åŒ–**: ä½¿ç”¨å…³é”®è¯ç´¢å¼•åŠ é€Ÿæœç´¢
- **å“åº”æ—¶é—´**: å¹³å‡å“åº”æ—¶é—´ < 3ç§’
- **å¹¶å‘æ”¯æŒ**: æ”¯æŒå¤šç”¨æˆ·åŒæ—¶ä½¿ç”¨

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¾èµ–å®‰è£…å¤±è´¥**
   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

2. **æ•°æ®åŠ è½½å¤±è´¥**
   - æ£€æŸ¥ `products.csv` å’Œ `policy.json` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
   - ç¡®è®¤æ–‡ä»¶ç¼–ç ä¸º UTF-8

3. **APIè°ƒç”¨å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - éªŒè¯APIå¯†é’¥æ˜¯å¦æ­£ç¡®

4. **ä¸­æ–‡åˆ†è¯é—®é¢˜**
   ```bash
   pip install jieba
   ```

### æ—¥å¿—æŸ¥çœ‹

ç³»ç»Ÿè¿è¡Œæ—¶ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼ŒåŒ…æ‹¬ï¼š
- æ•°æ®åŠ è½½çŠ¶æ€
- APIè°ƒç”¨ç»“æœ
- é”™è¯¯ä¿¡æ¯

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### æ›´æ–°äº§å“æ•°æ®

1. ç¼–è¾‘ `data/products.csv` æ–‡ä»¶
2. é‡å¯ç³»ç»Ÿè‡ªåŠ¨åŠ è½½æ–°æ•°æ®

### æ›´æ–°æ”¿ç­–ä¿¡æ¯

1. ç¼–è¾‘ `data/policy.json` æ–‡ä»¶
2. é‡å¯ç³»ç»Ÿè‡ªåŠ¨åŠ è½½æ–°æ”¿ç­–

### ç³»ç»Ÿå‡çº§

1. å¤‡ä»½æ•°æ®æ–‡ä»¶
2. æ›´æ–°ä»£ç 
3. å®‰è£…æ–°ä¾èµ–
4. é‡å¯ç³»ç»Ÿ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. è¿è¡Œæµ‹è¯•è„šæœ¬è¯Šæ–­é—®é¢˜
3. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œå†…éƒ¨ä½¿ç”¨ã€‚

---

**å¼€å‘å®Œæˆæ—¶é—´**: 2024å¹´
**ç‰ˆæœ¬**: 1.0.0
**çŠ¶æ€**: ç”Ÿäº§å°±ç»ª âœ…
